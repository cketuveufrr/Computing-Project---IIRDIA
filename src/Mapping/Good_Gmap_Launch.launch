<launch>
  <!-- Remappage des topics ROS pour le driver RVR -->
  <remap from="scan" to="/rvr1/scan"/>
  <remap from="odom" to="/rvr1/odom"/>

  <!-- Static transform avec tf pour placer le lidar -->
  <!-- Usage : x y z qx qy qz qw parent_frame child_frame period(s) -->
  <node pkg="tf" type="static_transform_publisher" name="laser_static_tf" args="0 0 0.2 0 0 0 1 odom /laser_frame 100"/>

  <!-- Lancement de slam_gmapping avec paramètres privés et remappings -->
  <node pkg="gmapping" type="slam_gmapping" name="slam_gmapping" output="screen">
    <!-- Remappings internes -->
    <remap from="scan" to="/rvr1/scan"/>
    <remap from="odom" to="/rvr1/odom"/>

    <!-- Paramètres privés (_param) -->
    <param name="odom_frame"      value="odom"/>
    <param name="map_frame"       value="map"/>
    <!-- On utilise odom comme base_frame car base_link n'existe pas -->
    <param name="base_frame"      value="odom"/>
    <param name="laser_frame"     value="/laser_frame"/>
    <param name="update_interval" value="5.0"/>
    <param name="maxUrange"       value="8.0"/>
    <param name="sigma"           value="0.05"/>
    <param name="kernelSize"      value="1"/>
  </node>
</launch>
